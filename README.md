# Basic Pentesting
![ảnh](https://hackmd.io/_uploads/ByIoATTNT.png)

### Prepare
tôi dùng openvpn để kết nối đến bài tập này
![ảnh](https://hackmd.io/_uploads/r1Fv0T6NT.png)


## các bước thực hiện bài tập này:
    1.Reconnaissance and Scanning
    2.SMB
    3.exploit



## Reconnaissance and Scanning
```
nmap -sV -sC 10.10.146.130
```

và hệ thống có dịch vụ web http ở cổng 80

![ảnh](https://hackmd.io/_uploads/rJb7H0TVp.png)

#### tìm thư mục ẩn
để trả lời cho câu hỏi này tôi sẽ dùng dirsearch để quét các thư mục ẩn
![ảnh](https://hackmd.io/_uploads/S1NQG0p46.png)
![ảnh](https://hackmd.io/_uploads/S1wyI0pV6.png)


và kết quả tôi tìm thấy có thư mục ##``` development ```##
trả về kết qủa 200

#### tìm các user của hệ thống
và khi tôi vào thư mục vừa tìm ra vừa rồi ```http://10.10.146.130/development/```
![ảnh](https://hackmd.io/_uploads/SyCiDCaV6.png)
tôi thấy có 2 tệp tin có nội dung là :100: 
dev.txt
![ảnh](https://hackmd.io/_uploads/SJgmdAa46.png)

J.txt
![ảnh](https://hackmd.io/_uploads/S1VNuC6E6.png)
enum4linux -a 10.10.81.129
đó là đoạn hội thoại của người tên J và tên K

và tôi quét các user của hệ thống bằng lệnh lệnh:
```
enum4linux -a 10.10.146.130
```
![ảnh](https://hackmd.io/_uploads/r1fWTA6ET.png)



và cuối cùng tôi tìm được 2 user là "jan" và "kay"
và "jan" đáp án của câu hỏi ![ảnh](https://hackmd.io/_uploads/Sk3TKCTVT.png)


#### tìm password của jan
![ảnh](https://hackmd.io/_uploads/B1_W906ET.png)

tôi sẽ dùng hydra để tìm mật khẩu của jan bằng lệnh:
```hydra -l jan -P /usr/share/wordlists/rockyou.txt 10.10.146.130 ssh```

![ảnh](https://hackmd.io/_uploads/SJfHW1REp.png)


và kết quả đó là "armando"

sau đó mình ssh đến hệ thống bằng tài khoản và mật khẩu của jan

![ảnh](https://hackmd.io/_uploads/rJZqiApE6.png)

ở đây tôi thấy jan là 1 user thường và không có uyền thực thi sudoer
![ảnh](https://hackmd.io/_uploads/S1xu20pV6.png)

các file trong hệ thống này jan không  có quyền đọc 
và có 2 user thường ![ảnh](https://hackmd.io/_uploads/ryls6ApN6.png)


#### tìm pass được lưu bởi kay
![ảnh](https://hackmd.io/_uploads/By3WsR6ET.png)


sau khi tìm thủ công và đọc các file không được kết quả gì,  tôi dùng "```linpaes```" để tìm lỗ hổng của hệ thống này

tôi copy file linpeas.sh từ máy local đến máy có ip là 10.10.146.130 bằng lệnh
```scp linpeas.sh jan@10.10.146.130:/tmp/linpeas.sh```
![ảnh](https://hackmd.io/_uploads/ryD5y1046.png)

và sau đó chạy nó trên máy mục tiêu
```./linpeas.sh```
![ảnh](https://hackmd.io/_uploads/SkOxxy0V6.png)

và tôi tìm được private key để ssh vào hệ thống của kayđược lưu trên hệ thống

![ảnh](https://hackmd.io/_uploads/HJJAZ1CNa.png)




tôi đọc file key đó ```cat /home/kay/.ssh/id_rsa```
và lưu nó vào file có trên key_id_rsa trên máy local

tôi thử dùng key vừa có để ssh đến tài khoản của kay nhưng không được 
![ảnh](https://hackmd.io/_uploads/H1IDzy0Vp.png)

và private key có pass để bảo vệ nên tôi sẽ dùng john_the_ripper để crack pass này bằng lệnh
```
/usr/share/john/ssh2john.py key_id_rsa > key_id_rsa
```
để chuyển sang dạng john_the_ripper có thể đọc được và sau đó tôi thấy file  key_id_rsa cần mật khẩu để mở:
![ảnh](https://hackmd.io/_uploads/HyCF810ET.png)

để crack mật khẩu này tôi dùng lệnh:
```
john --wordlist=/usr/share/wordlists/rockyou.txt key_id_rsa
```
và được kết quả là "beeswax"

sau đó tôi ssh lại đên kay và nhập passphrase

![ảnh](https://hackmd.io/_uploads/BJMhv1AEa.png)
và đọc được đáp án là "heresareallystrongpasswordthatfollowsthepasswordpolicy$$" trong file  pass.bak
![ảnh](https://hackmd.io/_uploads/BkUkO1ANa.png)

